#tabela1 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1 - PI2019.csv")
#tabela1 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1 - LP2022.csv")
#tabela1 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1 - BF2023.csv")
tabela1 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1&2 - All.csv")
# Para confirmar a classe de uma variável
class(tabela1)
# Frequencia de uma variável qualitativa ou categórica - Exemplo
sexo <- table(tabela1$sexo)
sexo
sm <- table(tabela1$smansoni) # Só em SB2011 & SB2015
sm
sm <- table(tabela1$sm)
sm
sm <- table(tabela1$sm_prev) # Inclui os resultados do piloto
sm
# Média de uma variável quantitativa - Exemplo
mean(tabela1$idade)
# Média removendo dados faltantes ou missing data (NA) - Exemplo
mean(tabela1$perct_vida_salvador)
mean(tabela1$perct_vida_salvador, na.rm = TRUE)
mean(tabela1$smovosq, na.rm = TRUE)
summary(tabela1$smovosq, na.rm = TRUE)
mean(tabela1$smovosq_prev, na.rm = TRUE) # Inclui os resultados do piloto
summary(tabela1$smovosq_prev, na.rm = TRUE)
# Desvio padrão da média - Exemplo
sd(tabela1$idade, na.rm = TRUE)
sd(tabela1$perct_vida_salvador, na.rm = TRUE)
sd(tabela1$smovosq, na.rm = TRUE)
sd(tabela1$smovosq_prev, na.rm = TRUE) # Inclui os resultados do piloto
# Média geométrica - Exemplo
exp(mean(log(tabela1$smovosq), na.rm = TRUE))
exp(mean(log(tabela1$smovosq_prev), na.rm = TRUE))  # Inclui os resultados do piloto
# Análise estratificada utilizando a função subset - Exemplo
sm_idade_menor21<-subset(tabela1, idade<21)
sm_idade<-table(sm_idade_menor21$sm_prev)
sm_idade
mean(sm_idade_menor21$smovosq, na.rm = TRUE)
sd(sm_idade_menor21$smovosq, na.rm = TRUE)
exp(mean(log(sm_idade_menor21$smovosq), na.rm = TRUE))
sm_idade_maior21<-subset(tabela1, idade>=21)
sm_idade<-table(sm_idade_maior21$sm_prev)
sm_idade
mean(sm_idade_maior21$smovosq, na.rm = TRUE)
sd(sm_idade_maior21$smovosq, na.rm = TRUE)
exp(mean(log(sm_idade_maior21$smovosq), na.rm = TRUE))
###
### Análise Urban Schisto - Tabela 2
###
# Carregando os dados de um arquivo .csv
tabela2 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1&2 - All.csv")
# Frequencia de uma variável qualitativa ou categórica - Exemplo
participants_study <- table(tabela2$study)
participants_study
sm <- table(tabela2$sm_prev) # Inclui os resultados do piloto
sm
stu_data <- table(tabela2$study,tabela2$sm_prev)
print(stu_data)
# Teste de qui-quadrado
# stu_data = table(tabela2$sexo,tabela2$smansoni) # Só em SB2011 & SB2015
stu_data = table(tabela2$sexo,tabela2$sm_prev)    # Inclui os resultados dos pilotos
print(stu_data)
chisq.test(stu_data)
stu_data = table(tabela2$nat1,tabela2$sm_prev)    # Inclui os resultados dos pilotos
print(stu_data)
chisq.test(stu_data)
stu_data = table(tabela2$resdoutr1,tabela2$sm_prev)     # Inclui os resultados dos pilotos
print(stu_data)
chisq.test(stu_data)
stu_data = table(tabela2$viaj1,tabela2$sm_prev)         # Inclui os resultados dos pilotos
print(stu_data)
# Calcular o chi-quadrado no EpiInfo
stu_data = table(tabela2$agua_ind,tabela2$sm_prev)      # Inclui os resultados dos pilotos
print(stu_data)
# Calcular o chi-quadrado no EpiInfo
stu_data = table(tabela2$banheiro_ind,tabela2$sm_prev)  # Inclui os resultados dos pilotos
print(stu_data)
# Calcular o chi-quadrado no EpiInfo
stu_data = table(tabela2$esgoto_ind,tabela2$sm_prev)    # Inclui os resultados dos pilotos
print(stu_data)
# 1) Comparing one-sample mean to a standard known mean
# 1.1) One-sample T-test (parametric)
t.test(tabela2$idade, mu = 0, alternative = "two.sided")
ggboxplot(tabela2$idade, na.rm = TRUE,
ylab = "Age (years)", xlab = FALSE,
ggtheme = theme_minimal())
shapiro.test(tabela2$idade) # Shapiro-Wilk normality test
# 1.2) One-sample Wilcoxon test (non-parametric)
wilcox.test(tabela2$idade, mu = 0, alternative = "two.sided")
group_by(tabela2, sm_prev) %>%
summarise(
count = n(),
mean = mean(idade, na.rm = TRUE),
sd = sd(idade, na.rm = TRUE)
)
# 2) Comparing the means of two independent groups
# 2.1) Unpaired two samples t-test (parametric)
ggboxplot(tabela2, x = "sm_prev", y = "idade",
color = "sm_prev", palette = c("#00AFBB", "#E7B800"),
ylab = "Idade", xlab = "Groups")
# Shapiro-Wilk normality test for Men's weights
with(tabela2, shapiro.test(idade[sm_prev == 1])) # p = 0.1
# Shapiro-Wilk normality test for Women's weights
with(tabela2, shapiro.test(idade[sm_prev == 2])) # p = 0.6
var.test(idade ~ sm_prev, data = tabela2)
t.test(idade ~ sm_prev, data = tabela2, var.equal = TRUE)
# 3) Comparing the means of paired samples
# 4) Comparing the means of more than two groups
# 5) MANOVA test: Multivariate analysis of variance
# 6) Kruskal-Wallis test
levels(tabela2$sm_prev)
group_by(tabela2, sm_prev) %>%
summarise(
count = n(),
mean = mean(idade, na.rm = TRUE),
sd = sd(idade, na.rm = TRUE),
median = median(idade, na.rm = TRUE),
IQR = IQR(idade, na.rm = TRUE)
)
ggboxplot(tabela2, x = "sm_prev", y = "idade",
color = "sm_prev", palette = c("#00AFBB", "#E7B800"),
ylab = "Idade", xlab = "Groups")
ggline(tabela2, x = "sm_prev", y = "idade",
add = c("mean_se", "jitter"),
ylab = "Idade", xlab = "SM")
kruskal.test(idade ~ sm_prev, data = tabela2)
###
### Análise Urban Schisto - Tabela 2
###
# Comparação de médias
levels(tabela2$sm_prev)
group_by(tabela2, sm_prev) %>%
summarise(
count = n(),
mean = mean(perct_vida_salvador, na.rm = TRUE),
sd = sd(perct_vida_salvador, na.rm = TRUE),
median = median(perct_vida_salvador, na.rm = TRUE),
IQR = IQR(perct_vida_salvador, na.rm = TRUE)
)
ggboxplot(tabela2, x = "sm_prev", y = "perct_vida_salvador",
color = "sm_prev", palette = c("#00AFBB", "#E7B800"),
ylab = "%Life in Salvador", xlab = "Groups")
ggline(tabela2, x = "sm_prev", y = "perct_vida_salvador",
add = c("mean_se", "jitter"),
ylab = "%Life in Salvador", xlab = "SM")
kruskal.test(perct_vida_salvador ~ sm_prev, data = tabela2)
###
### Análise Urban Schisto - Tabela 3
###
# Carregando os dados de um arquivo .csv
# Dados SA2019
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - SA2019.csv")
id_corte<-4000
# Dados SA2023
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - SA2023.csv")
id_corte<-5000
# Dados PI2021
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - PI2021.csv")
id_corte<-3000
# Dados PI2023
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - PI2023.csv")
id_corte<-4000
# Dados SB2024
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - SB2024.csv")
id_corte<-3000
# Prevalência Global
sm_prev <- table(tabela3$sm)
sm_prev
mean(tabela3$smovosq, na.rm = TRUE)
sd(tabela3$smovosq, na.rm = TRUE)
exp(mean(log(tabela3$smovosq), na.rm = TRUE))
# Prevalência da Coorte (Incidência)
coorte <- subset(tabela3, id<id_corte)
sm_coorte <- table(coorte$sm)
sm_coorte
mean(coorte$smovosq, na.rm = TRUE)
sd(coorte$smovosq, na.rm = TRUE)
exp(mean(log(coorte$smovosq), na.rm = TRUE))
# Prevalência dos Novos
novos <- subset(tabela3, id>=id_corte)
sm_novos <- table(novos$sm)
sm_novos
mean(novos$smovosq, na.rm = TRUE)
sd(novos$smovosq, na.rm = TRUE)
exp(mean(log(novos$smovosq), na.rm = TRUE))
# Dados SB2015
tabela3 <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 3 - SB2015.csv")
# Prevalência Global
sm_prev <- table(tabela3$smansoni)
sm_prev
mean(tabela3$smovosq, na.rm = TRUE)
sd(tabela3$smovosq, na.rm = TRUE)
exp(mean(log(tabela3$smovosq), na.rm = TRUE))
# Prevalência da Coorte (Incidência)
coorte <- subset(tabela3, part2011==1)
sm_coorte <- table(coorte$smansoni)
sm_coorte
mean(coorte$smovosqmedia, na.rm = TRUE)
sd(coorte$smovosqmedia, na.rm = TRUE)
exp(mean(log(coorte$smovosqmedia), na.rm = TRUE))
# Prevalência dos Novos
novos <- subset(tabela3, part2011==2)
sm_novos <- table(novos$smansoni)
sm_novos
mean(novos$smovosqmedia, na.rm = TRUE)
sd(novos$smovosqmedia, na.rm = TRUE)
exp(mean(log(novos$smovosqmedia), na.rm = TRUE))
# Figura 1
figura1 <- read.csv2("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/Projetos/2014- Mitermayer Esquistossomose urbana/Produção/Publicações/2023 Artigo Urban Schisto/Tabela 1 - All.csv")
sm_by_studygroup <- subset(figura1, study=="BF2023", select=c(idade, sexo, sm, sm_prev))
sm_by_studygroup$faixaetaria <- NA
# Recodifica idade por grupo etário por desenvolvimento humano
sm_by_studygroup[sm_by_studygroup$idade <= 6, "faixaetaria"] <- "2-6"
sm_by_studygroup[sm_by_studygroup$idade >= 7 & sm_by_studygroup$idade <= 12, "faixaetaria"] <- "7-12"
sm_by_studygroup[sm_by_studygroup$idade >= 13 & sm_by_studygroup$idade <= 18, "faixaetaria"] <- "13-18"
sm_by_studygroup[sm_by_studygroup$idade >= 19 & sm_by_studygroup$idade <= 29, "faixaetaria"] <- "19-29"
sm_by_studygroup[sm_by_studygroup$idade >= 30 & sm_by_studygroup$idade <= 49, "faixaetaria"] <- "30-49"
sm_by_studygroup[sm_by_studygroup$idade >= 50 & sm_by_studygroup$idade <= 64, "faixaetaria"] <- "50-64"
sm_by_studygroup[sm_by_studygroup$idade >= 65 & sm_by_studygroup$idade <= 100, "faixaetaria"] <- "+65"
# Recodifica idade por grupo etário de 5 em 5 anos
sm_by_studygroup[sm_by_studygroup$idade <= 5, "faixaetaria"] <- "2-5"
sm_by_studygroup[sm_by_studygroup$idade >= 6 & sm_by_studygroup$idade <= 10, "faixaetaria"] <- "6-10"
sm_by_studygroup[sm_by_studygroup$idade >= 11 & sm_by_studygroup$idade <= 15, "faixaetaria"] <- "11-15"
sm_by_studygroup[sm_by_studygroup$idade >= 16 & sm_by_studygroup$idade <= 20, "faixaetaria"] <- "16-20"
sm_by_studygroup[sm_by_studygroup$idade >= 21 & sm_by_studygroup$idade <= 25, "faixaetaria"] <- "21-25"
sm_by_studygroup[sm_by_studygroup$idade >= 26 & sm_by_studygroup$idade <= 30, "faixaetaria"] <- "26-30"
sm_by_studygroup[sm_by_studygroup$idade >= 31 & sm_by_studygroup$idade <= 35, "faixaetaria"] <- "31-35"
sm_by_studygroup[sm_by_studygroup$idade >= 36 & sm_by_studygroup$idade <= 40, "faixaetaria"] <- "36-40"
sm_by_studygroup[sm_by_studygroup$idade >= 41 & sm_by_studygroup$idade <= 45, "faixaetaria"] <- "41-45"
sm_by_studygroup[sm_by_studygroup$idade >= 46 & sm_by_studygroup$idade <= 50, "faixaetaria"] <- "46-50"
sm_by_studygroup[sm_by_studygroup$idade >= 51 & sm_by_studygroup$idade <= 55, "faixaetaria"] <- "51-55"
sm_by_studygroup[sm_by_studygroup$idade >= 56 & sm_by_studygroup$idade <= 60, "faixaetaria"] <- "56-60"
sm_by_studygroup[sm_by_studygroup$idade >= 61 & sm_by_studygroup$idade <= 65, "faixaetaria"] <- "61-65"
sm_by_studygroup[sm_by_studygroup$idade >= 66 & sm_by_studygroup$idade <= 70, "faixaetaria"] <- "66-70"
sm_by_studygroup[sm_by_studygroup$idade >= 71 & sm_by_studygroup$idade <= 100, "faixaetaria"] <- "+71"
participants_sm <- table(sm_by_studygroup$faixaetaria, sm_by_studygroup$sm)
participants_sm
participants_sm_prev <- table(sm_by_studygroup$faixaetaria, sm_by_studygroup$sm_prev)
participants_sm_prev
knitr::opts_chunk$set(echo = TRUE)
# Instala os pacotes requeridos para o script
list.of.packages <- c("dplyr")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Carregando os dados de um arquivo .csv da pasta do Github da Fiocruz
dados <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/consumo_RM.csv")
# Carregando os dados de um arquivo .csv da pasta Github do laptop ASUS
#dados <- read.csv("C:/Users/kalab/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/consumo_RM.csv")
# Para confirmar a classe de uma variável
View(dados)
class(dados)
library(dplyr)
# Calculando a frequência dos equipamentos
frequencia <- dados %>%
group_by(tipo_congelador) %>%
summarise(frequencia = n())
# Calculando a média de consumo teórico por linha
consumo_teorico <- dados %>%
group_by(tipo_congelador) %>%
summarise(media_consumo_teorico = mean(consumo_calculado))
# Calculando a média de consumo medido por linha
consumo_medido <- dados %>%
group_by(tipo_congelador) %>%
summarise(media_consumo_medido = mean(consumo30))
# Combinando os resultados (opcional)
resultados_inicial <- left_join(frequencia, consumo_teorico,  by = "tipo_congelador")
resultados_final <- merge(resultados_inicial, consumo_medido,  by = "tipo_congelador")
# Visualizando os resultados
print(resultados_final)
# Faz um teste ANOVA para comparar as médias
# ANOVA é apropriado para comparar médias de mais de dois grupos
resultado_anova <- aov(consumo30 ~ tipo_congelador, data = dados)
print("Resultado do teste ANOVA:")
summary(resultado_anova)
# Se o ANOVA for significativo, faz testes post-hoc (Tukey) para comparar pares de médias
# Testes post-hoc são feitos para determinar quais grupos são significativamente diferentes entre si
# Correção: Garante que estamos extraindo um único valor p do summary do ANOVA
p_value <- summary(resultado_anova)[[1]][["Pr(>F)"]][1] # Pega o primeiro valor p da tabela
if (p_value < 0.05) { # Verifica se o valor p do ANOVA é significativo (0.05 é um limiar comum)
teste_tukey <- TukeyHSD(resultado_anova)
print("Teste de Tukey (comparações pairwise):")
print(teste_tukey)
} else {
print("ANOVA não foi significativo, não há necessidade de testes post-hoc.")
}
# Se a variável possuir apenas duas classe, recomenda-se utilizar o test t de Student
# Realize o teste t de Student para amostras independentes
# A fórmula valor ~ classe especifica que você quer comparar os valores da coluna 'valor' entre os grupos definidos pela coluna 'classe'
teste_t <- t.test(consumo30 ~ linhadoequipamento, data = dados)
# Imprima os resultados do teste t
print(teste_t)
# Gerar um boxplot para visualizar a distribuição do consumo por tipo de equipamento
boxplot(consumo30 ~ tipo_congelador, data = dados,
main = "Comparação do Consumo por Tipo de Equipamento",
xlab = "Tipo de Equipamento",
ylab = "Consumo")
# Realizar o teste de Kruskal-Wallis
teste_kruskal_wallis <- kruskal.test(consumo30 ~ tipo_congelador, data = dados)
# Exibir os resultados do teste de Kruskal-Wallis
print("\nResultados do Teste de Kruskal-Wallis:")
print(teste_kruskal_wallis)
library(dplyr)
# Subset de equipamentos
dados_duplex <- subset(dados, tipo_congelador == 2)
# Colocar o nome da coluna de dados aqui
estratificado_por <- "linhadoequipamento"
# Calculando a frequência dos equipamentos
frequencia <- dados_duplex %>%
group_by(dados_duplex[, estratificado_por]) %>%
summarise(frequencia = n())
# Calculando a média de consumo teórico por linha
consumo_teorico <- dados_duplex %>%
group_by(dados_duplex[, estratificado_por]) %>%
summarise(media_consumo_teorico = mean(consumo_calculado))
# Calculando a média de consumo medido por linha
consumo_medido <- dados_duplex %>%
group_by(dados_duplex[, estratificado_por]) %>%
summarise(media_consumo_medido = mean(consumo30))
# Combinando os resultados (opcional)
resultados_inicial <- left_join(frequencia, consumo_teorico,  by = "dados_duplex[, estratificado_por]")
resultados_final <- merge(resultados_inicial, consumo_medido,  by = "dados_duplex[, estratificado_por]")
# Visualizando os resultados
print(resultados_final)
# Faz um teste ANOVA para comparar as médias
# ANOVA é apropriado para comparar médias de mais de dois grupos
resultado_anova <- aov(consumo30 ~ dados_duplex[, estratificado_por], data = dados_duplex)
print("Resultado do teste ANOVA:")
summary(resultado_anova)
# Se o ANOVA for significativo, faz testes post-hoc (Tukey) para comparar pares de médias
# Testes post-hoc são feitos para determinar quais grupos são significativamente diferentes entre si
# Correção: Garante que estamos extraindo um único valor p do summary do ANOVA
p_value <- summary(resultado_anova)[[1]][["Pr(>F)"]][1] # Pega o primeiro valor p da tabela
if (p_value < 0.05) { # Verifica se o valor p do ANOVA é significativo (0.05 é um limiar comum)
teste_tukey <- TukeyHSD(resultado_anova)
print("Teste de Tukey (comparações pairwise):")
print(teste_tukey)
} else {
print("ANOVA não foi significativo, não há necessidade de testes post-hoc.")
}
# Se a variável possuir apenas duas classe, recomenda-se utilizar o test t de Student
# Realize o teste t de Student para amostras independentes
# A fórmula valor ~ classe especifica que você quer comparar os valores da coluna 'valor' entre os grupos definidos pela coluna 'classe'
teste_t <- t.test(consumo30 ~ dados_duplex[, estratificado_por], data = dados_duplex)
knitr::opts_chunk$set(echo = TRUE)
# Instala os pacotes requeridos para o script
list.of.packages <- c("pROC", "dplyr", "readr", "ggpubr", "caret")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Carregando os dados de um arquivo .csv na Fiocruz
# dados <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/extracao_ROC.csv", sep=",")
# Carregando os dados de um arquivo .csv no laptop ASUS
dados <- read.csv2("C:/Users/kalab/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/extracao_curvaROC.csv")
knitr::opts_chunk$set(echo = TRUE)
# Instala os pacotes requeridos para o script
list.of.packages <- c("dplyr", "gtsummary")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Carregando os dados de um arquivo .csv na Fiocruz
#dados <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/tabela1_MP.csv")
# Carregando os dados de um arquivo .csv no laptop ASUS
dados <- read.csv("C:/Users/kalab/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/tabela1_MP.csv")
#Carrega o pacote gtsummary
library(dplyr)
# Recodificando os valores dos dados da data.frame
dados_recodificado <- dados %>%
mutate(sexo = recode(sexo, "1" = "Masculino", "2" = "Feminino"))
# Instala os pacotes requeridos para o script
list.of.packages <- c("dplyr", "gtsummary")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Carregando os dados de um arquivo .csv na Fiocruz
dados <- read.csv("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/tabela1_MP.csv")
# Carregando os dados de um arquivo .csv no laptop ASUS
#dados <- read.csv("C:/Users/kalab/OneDrive - FIOCRUZ/GitHub/r_analysis/datasets/tabela1_MP.csv")
# Para confirmar a classe de uma variável
View(dados)
class(dados)
#Carrega o pacote gtsummary
library(dplyr)
# Recodificando os valores dos dados da data.frame
dados_recodificado <- dados %>%
mutate(sexo = recode(sexo, "1" = "Masculino", "2" = "Feminino"))
dados_recodificado <- dados_recodificado %>%
mutate(nat1 = recode(nat1, "1" = "Salvador", "2" = "Outras localidades"))
# Maju, vc precisa recodificar as demais variáveis antes de passar dados_recodificado para a função tbl_summary
# Renomeando os rótulos do data.frame
# NOTA: Vamos usar o argumento labels da própria função tbl_summarey para fazer esta etapa
#dados_renomeado <- dados %>%
#  rename("Sexo" = sexo,
#         "Idade" = idade,
#         "Naturalidade" = nat1,
#         "Cor da pele" = cor,
#         "Escolaridade" = escolaridade)
#Carrega o pacote gtsummary
library(gtsummary)
# Tabela corrigida
tbl_summary(dados_recodificado,
label = list(id ~ "Total",
sexo ~ "Sexo",
idade ~ "Idade",
nat1 ~ "Naturalidade",
cor ~ "Cor da pele",
escolaridade ~ "Escolaridade"),
statistic = list(idade ~ "{mean} ({sd})"),
digits = list(idade ~ c(1,2)),
# no - nunca mostra; always - sempre mostra e ifany - mostra se tiver
missing = "no",
sort = list(sexo ~ "frequency")) %>%
bold_labels() %>%
italicize_levels()
# Tabela corrigida
tbl_summary(dados_recodificado,
label = list(id ~ "Total",
sexo ~ "Sexo",
idade ~ "Idade",
nat1 ~ "Naturalidade",
cor ~ "Cor da pele",
escolaridade ~ "Escolaridade"),
statistic = list(idade ~ "{mean} ({sd})"),
digits = list(idade ~ c(1,2)),
# no - nunca mostra; always - sempre mostra e ifany - mostra se tiver
missing = "no",
sort = list(sexo ~ "frequency")) %>%
bold_labels() %>%
italicize_levels()
load("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis/redcap_analysis/.RData")
# Install libraries if not installed
list.of.packages <- c("shiny", "bslib")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Create an app
library(shiny)
library(bslib)
# Define UI for app that draws a histogram ----
ui <- page_sidebar(
# App title ----
title = "Hello Shiny!",
# Sidebar panel for inputs ----
sidebar = sidebar(
# Input: Slider for the number of bins ----
sliderInput(
inputId = "bins",
label = "Number of bins:",
min = 1,
max = 50,
value = 30
)
),
# Output: Histogram ----
plotOutput(outputId = "distPlot")
)
# Define server logic required to draw a histogram ----
server <- function(input, output) {
# Histogram of the Old Faithful Geyser Data ----
# with requested number of bins
# This expression that generates a histogram is wrapped in a call
# to renderPlot to indicate that:
#
# 1. It is "reactive" and therefore should be automatically
#    re-executed when inputs (input$bins) change
# 2. Its output type is a plot
output$distPlot <- renderPlot({
x    <- faithful$waiting
bins <- seq(min(x), max(x), length.out = input$bins + 1)
hist(x, breaks = bins, col = "#007bc2", border = "white",
xlab = "Waiting time to next eruption (in mins)",
main = "Histogram of waiting times")
})
}
# Run...
shinyApp(ui = ui, server = server)
# Instala as biblioteca básicas para conexão API no R
list.of.packages <- c("httr", "jsonlite", "ggplot2", "dplyr")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
# Testa as bibliotecas
library(httr)
library(jsonlite)
# Caminho Fiocruz
setwd("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis")
source("config.R")   # Lê api_token e api_url do projeto
# Caminho Fiocruz
setwd("C:/Users/luciano.kalabric/OneDrive - FIOCRUZ/GitHub/r_analysis")
source("config.R")   # Lê api_token e api_url do projeto
# Export Project Information
formData <- list("token"=api_token,
content='project',
format='json',
returnFormat='json'
)
response <- httr::POST(api_url, body = formData, encode = "form")
project <- httr::content(response)
print(project)
# Export Records
formData <- list("token"=api_token,
content='record',
format='csv',
type='flat'
)
response <- httr::POST(api_url, body = formData, encode = "form")
result_df <- httr::content(response)
# Estatísticas descritivas dos nossos dados
table(result_df$sexo)
summary(result_df$idade)
View(result)
View(result)
table(result_df$sexo)
View(result_df)
View(result_df)
table(nat1$result_df)
table(result_df$nat1)
summary(result_df$nat1)
summary(result_df$idade)
